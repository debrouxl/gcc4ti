<HTML>
<HEAD>
<TITLE>_DLL_reference</TITLE>
<LINK REL="STYLESHEET" TYPE="TEXT/CSS" HREF="style.css">
</HEAD>
<BODY BGCOLOR="#FFFFF8">
<TABLE CLASS="INVTABLE" WIDTH="100%">
<TR>
<TD CLASS="NOBORDER" WIDTH="40"><IMG SRC="function.gif" WIDTH="32" HEIGHT="32" BORDER="0"></TD>
<TD CLASS="TITLE">_DLL_reference</TD>
<TD CLASS="DESCRIPTION">Function (Macro Constructor)</TD>
</TR>
</TABLE>
<HR>
<TABLE CLASS="NOBORDER" WIDTH="100%"><TR>
<TD CLASS="HEADER" ALIGN="RIGHT"><A HREF="dll.html">dll.h</A>
</TD>
</TR></TABLE>
<P><TABLE CLASS="DEFTABLE"><TR><TD CLASS="DEFINITION"><B><A HREF="cpp_SEC10.html">#define</A></B> _DLL_reference(type,index) ((type*<B><A HREF="keywords_const.html">const</A></B>) _DLL_entry (index))</TD></TR></TABLE>
<P CLASS="ITEMDESC"><B>Returns a pointer to a global variable in a DLL.</B>
<P>_DLL_reference gets a void pointer to the location of the <I>index</I>-th exported symbol of the
currently loaded DLL (using <A HREF="dll__DLL_entry.html">_DLL_entry</A>), then casts this pointer to a constant pointer
of type <I>type</I>. This macro is usually used for accessing arrays exported from the DLL.
For example, suppose that the DLL contains the following declarations in the DLL interface
section (see <A HREF="dll_DLL_INTERFACE.html">DLL_INTERFACE</A>):
<PRE>char foo[] = "FooString";
int bar[5] = {10, 20, 30, 40, 50};
...
DLL_EXPORTS foo, bar
</PRE>
Then <I>foo</I> will get the index number 0, and <I>bar</I> will get the index number 1.
To 'import' these two arrays from the DLL
(assuming that the DLL has been loaded sucessfully using <A HREF="dll_LoadDLL.html">LoadDLL</A>),
you should use the following defines: 
<PRE>#define foo _DLL_reference (const char, 0)
#define bar _DLL_reference (int, 1)
</PRE>
Then you can use <I>foo</I> and <I>bar</I> just like normal arrays defined in the main program.
Note that the elements of <I>foo</I> cannot be changed due to the <CODE><A HREF="keywords_const.html">const</A></CODE> qualifier
in the definition of <I>foo</I> (at least writing to it will trigger a warning).
However, you can access the elements of <I>bar</I>. For example:
<PRE>printf ("%s %d", foo, bar[2]);
bar[2] = 100;
printf (" %d", bar[2]);
</PRE>
<P><HR>See also: <A HREF="dll__DLL_call.html">_DLL_call</A>, <A HREF="dll__DLL_call_attr.html">_DLL_call_attr</A>, <A HREF="dll__DLL_glbvar.html">_DLL_glbvar</A>
</BODY>
</HTML>
